# BK7258 + OV6946 WiFi Video Streaming System
## Project Presentation Document

---

## ðŸ“‹ **Executive Summary**

The BK7258 + OV6946 WiFi Video Streaming System is a complete embedded solution that enables real-time video streaming from a compact camera module to mobile devices over WiFi. This system combines the powerful BK7258 WiFi SoC with the ultra-compact OV6946 camera sensor to create a professional-grade streaming solution suitable for IoT, security, and monitoring applications.

### **Key Features**
- **Real-time video streaming** at 400x400 resolution @ 30fps
- **Dual protocol support**: RTSP/RTP and HTTP/MJPEG streaming
- **Cross-platform mobile clients**: Native iOS/iPad and Android applications
- **Ultra-low power consumption**: Optimized for battery-powered applications
- **Compact form factor**: Suitable for embedded and portable applications

---

## ðŸŽ¯ **Project Objectives**

### **Primary Goals**
1. **Hardware Integration**: Seamless integration of BK7258 SoC with OV6946 camera sensor
2. **Real-time Streaming**: Achieve sub-500ms latency for live video streaming
3. **Mobile Compatibility**: Native apps for both iOS and Android platforms
4. **Production Ready**: Develop a complete, deployable solution with documentation

### **Technical Targets**
- **Video Quality**: 400x400 pixels @ 30fps with adaptive quality control
- **Streaming Protocols**: RTSP/RTP for low latency, HTTP/MJPEG for compatibility
- **Power Efficiency**: <1W total system power consumption
- **Range**: 50+ meter WiFi range with stable streaming

---

## ðŸ—ï¸ **System Architecture**

### **High-Level System Block Diagram**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    BK7258 + OV6946 Streaming System                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â”‚ WiFi 802.11n
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  â”‚    â”‚                  â”‚    â”‚                  â”‚
â”‚   iOS/iPad App   â”‚    â”‚   WiFi Router    â”‚    â”‚   Android App    â”‚
â”‚                  â”‚    â”‚                  â”‚    â”‚                  â”‚
â”‚  â€¢ SGPlayer      â”‚â—„â”€â”€â–ºâ”‚  â€¢ RTSP Relay    â”‚â—„â”€â”€â–ºâ”‚  â€¢ ExoPlayer     â”‚
â”‚  â€¢ AVFoundation  â”‚    â”‚  â€¢ HTTP Proxy    â”‚    â”‚  â€¢ MediaPlayer   â”‚
â”‚  â€¢ Video Controlsâ”‚    â”‚  â€¢ Network Mgmt  â”‚    â”‚  â€¢ Video Controlsâ”‚
â”‚                  â”‚    â”‚                  â”‚    â”‚                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### **Embedded System Architecture**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        BK7258 SoC System                               â”‚
â”‚                                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                 â”‚    â”‚                 â”‚    â”‚                 â”‚    â”‚
â”‚  â”‚   ARM Cortex-M33â”‚â—„â”€â”€â–ºâ”‚  WiFi 802.11n   â”‚â—„â”€â”€â–ºâ”‚  Streaming      â”‚    â”‚
â”‚  â”‚   @ 120MHz      â”‚    â”‚  MAC/PHY        â”‚    â”‚  Engine         â”‚    â”‚
â”‚  â”‚                 â”‚    â”‚                 â”‚    â”‚                 â”‚    â”‚
â”‚  â”‚  â€¢ Video Proc   â”‚    â”‚  â€¢ AP/STA Mode  â”‚    â”‚  â€¢ RTSP Server  â”‚    â”‚
â”‚  â”‚  â€¢ MJPEG Encode â”‚    â”‚  â€¢ WPA2/WPA3    â”‚    â”‚  â€¢ HTTP Server  â”‚    â”‚
â”‚  â”‚  â€¢ Buffer Mgmt  â”‚    â”‚  â€¢ TCP/UDP      â”‚    â”‚  â€¢ RTP/RTCP     â”‚    â”‚
â”‚  â”‚                 â”‚    â”‚                 â”‚    â”‚                 â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚           â–²                                                            â”‚
â”‚           â”‚ SPI Control                                                â”‚
â”‚           â”‚ ADC Data                                                   â”‚
â”‚           â–¼                                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                    Peripheral Interface                         â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â”‚ SPI + Analog
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        OV6946 Camera Sensor                            â”‚
â”‚                                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                 â”‚    â”‚                 â”‚    â”‚                 â”‚    â”‚
â”‚  â”‚  Pixel Array    â”‚â”€â”€â”€â–ºâ”‚   Analog AFE    â”‚â”€â”€â”€â–ºâ”‚  Output Buffer  â”‚    â”‚
â”‚  â”‚  400 x 400      â”‚    â”‚                 â”‚    â”‚                 â”‚    â”‚
â”‚  â”‚  1.75Î¼m pixels  â”‚    â”‚  â€¢ Gain Control â”‚    â”‚  â€¢ Line Driver  â”‚    â”‚
â”‚  â”‚                 â”‚    â”‚  â€¢ Noise Reduct â”‚    â”‚  â€¢ Analog Out   â”‚    â”‚
â”‚  â”‚  â€¢ Rolling      â”‚    â”‚  â€¢ Gamma Corr   â”‚    â”‚                 â”‚    â”‚
â”‚  â”‚    Shutter      â”‚    â”‚                 â”‚    â”‚                 â”‚    â”‚
â”‚  â”‚  â€¢ On-chip PLL  â”‚    â”‚                 â”‚    â”‚                 â”‚    â”‚
â”‚  â”‚                 â”‚    â”‚                 â”‚    â”‚                 â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚           â–²                                           â”‚                â”‚
â”‚           â”‚                                           â”‚                â”‚
â”‚           â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚                â”‚
â”‚           â””â”€â”‚  SPI Interface  â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
â”‚             â”‚  â€¢ Registers    â”‚                                       â”‚
â”‚             â”‚  â€¢ Control      â”‚                                       â”‚
â”‚             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ðŸ”§ **Hardware Components**

### **BK7258 WiFi SoC Specifications**

| **Component** | **Specification** | **Details** |
|---------------|-------------------|-------------|
| **CPU Core** | ARM Cortex-M33 | 120MHz, single precision FPU |
| **Memory** | 2MB Flash + 512KB RAM | Integrated memory |
| **WiFi** | IEEE 802.11n | 2.4GHz, up to 72.2Mbps |
| **Interfaces** | SPI, I2C, UART, ADC, GPIO | Multiple peripheral support |
| **Power** | 3.3V @ ~300mA | Low power design |
| **Package** | QFN88 | 9mm x 9mm compact package |
| **Temperature** | -40Â°C to +85Â°C | Industrial temperature range |

### **OV6946 Camera Sensor Specifications**

| **Component** | **Specification** | **Details** |
|---------------|-------------------|-------------|
| **Resolution** | 400 x 400 pixels | 160K total pixels |
| **Pixel Size** | 1.75Î¼m | Ultra-compact pixel design |
| **Optical Format** | 1/18" | Smallest available format |
| **Frame Rate** | 30fps | Full resolution |
| **Interface** | SPI + Analog | Control via SPI, video via analog |
| **Power** | 3.3V @ 25mW | Ultra-low power consumption |
| **Package** | 950Î¼m x 940Î¼m | World's smallest image sensor |
| **Technology** | OmniBSIâ„¢+ | Advanced backside illumination |

---

## ðŸ“¡ **Software Architecture**

### **Firmware Stack Diagram**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Application Layer                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚  RTSP Server    â”‚  â”‚  HTTP Server    â”‚  â”‚  Configuration  â”‚        â”‚
â”‚  â”‚  â€¢ Session Mgmt â”‚  â”‚  â€¢ MJPEG Stream â”‚  â”‚  â€¢ Web Interfaceâ”‚        â”‚
â”‚  â”‚  â€¢ RTP Transportâ”‚  â”‚  â€¢ Static Files â”‚  â”‚  â€¢ Settings API â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Streaming Engine                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚  Video Encoder  â”‚  â”‚  Buffer Manager â”‚  â”‚  Network Stack  â”‚        â”‚
â”‚  â”‚  â€¢ MJPEG Comp   â”‚  â”‚  â€¢ Frame Queue  â”‚  â”‚  â€¢ TCP/UDP      â”‚        â”‚
â”‚  â”‚  â€¢ Quality Ctrl â”‚  â”‚  â€¢ Memory Pool  â”‚  â”‚  â€¢ Socket Mgmt  â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Hardware Abstraction Layer                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚  Camera Driver  â”‚  â”‚  WiFi Driver    â”‚  â”‚  System Driver  â”‚        â”‚
â”‚  â”‚  â€¢ OV6946 SPI   â”‚  â”‚  â€¢ 802.11n MAC â”‚  â”‚  â€¢ Clock Mgmt   â”‚        â”‚
â”‚  â”‚  â€¢ ADC Capture  â”‚  â”‚  â€¢ WPA2/WPA3    â”‚  â”‚  â€¢ Power Mgmt   â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Beken Armino RTOS                                 â”‚
â”‚  â€¢ Task Scheduling  â€¢ Memory Management  â€¢ Interrupt Handling          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### **Mobile Application Architecture**

#### **iOS/iPad Application Stack**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        iOS Application                                 â”‚
â”‚                                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚     SwiftUI     â”‚  â”‚   Combine       â”‚  â”‚    Network      â”‚        â”‚
â”‚  â”‚                 â”‚  â”‚                 â”‚  â”‚                 â”‚        â”‚
â”‚  â”‚  â€¢ Player View  â”‚  â”‚  â€¢ Data Binding â”‚  â”‚  â€¢ URLSession   â”‚        â”‚
â”‚  â”‚  â€¢ Controls     â”‚  â”‚  â€¢ State Mgmt   â”‚  â”‚  â€¢ WebSocket    â”‚        â”‚
â”‚  â”‚  â€¢ Settings UI  â”‚  â”‚  â€¢ Reactive     â”‚  â”‚  â€¢ Discovery    â”‚        â”‚
â”‚  â”‚                 â”‚  â”‚                 â”‚  â”‚                 â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚                                 â”‚                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚    SGPlayer     â”‚  â”‚   AVFoundation  â”‚  â”‚   VideoToolbox  â”‚        â”‚
â”‚  â”‚                 â”‚  â”‚                 â”‚  â”‚                 â”‚        â”‚
â”‚  â”‚  â€¢ RTSP Support â”‚  â”‚  â€¢ Media Player â”‚  â”‚  â€¢ HW Decode    â”‚        â”‚
â”‚  â”‚  â€¢ Hardware     â”‚  â”‚  â€¢ Asset Mgmt   â”‚  â”‚  â€¢ H.264 Accel  â”‚        â”‚
â”‚  â”‚    Acceleration â”‚  â”‚  â€¢ Playback     â”‚  â”‚  â€¢ Format Conv  â”‚        â”‚
â”‚  â”‚                 â”‚  â”‚                 â”‚  â”‚                 â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### **Android Application Stack**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Android Application                               â”‚
â”‚                                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚ Jetpack Compose â”‚  â”‚    ViewModel    â”‚  â”‚    Repository   â”‚        â”‚
â”‚  â”‚                 â”‚  â”‚                 â”‚  â”‚                 â”‚        â”‚
â”‚  â”‚  â€¢ UI Componentsâ”‚  â”‚  â€¢ State Mgmt   â”‚  â”‚  â€¢ Data Source  â”‚        â”‚
â”‚  â”‚  â€¢ Player Screenâ”‚  â”‚  â€¢ LiveData     â”‚  â”‚  â€¢ Network API  â”‚        â”‚
â”‚  â”‚  â€¢ Navigation   â”‚  â”‚  â€¢ Coroutines   â”‚  â”‚  â€¢ Local Cache  â”‚        â”‚
â”‚  â”‚                 â”‚  â”‚                 â”‚  â”‚                 â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚                                 â”‚                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚    ExoPlayer    â”‚  â”‚   Media3 RTSP   â”‚  â”‚   MediaCodec    â”‚        â”‚
â”‚  â”‚                 â”‚  â”‚                 â”‚  â”‚                 â”‚        â”‚
â”‚  â”‚  â€¢ Media Engine â”‚  â”‚  â€¢ RTSP Client  â”‚  â”‚  â€¢ HW Decode    â”‚        â”‚
â”‚  â”‚  â€¢ Adaptive     â”‚  â”‚  â€¢ RTP/RTCP     â”‚  â”‚  â€¢ H.264 Accel  â”‚        â”‚
â”‚  â”‚    Streaming    â”‚  â”‚  â€¢ Authenticationâ”‚ â”‚  â€¢ Surface Renderâ”‚       â”‚
â”‚  â”‚                 â”‚  â”‚                 â”‚  â”‚                 â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ðŸŒ **Network Protocol Stack**

### **Streaming Protocol Diagram**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Client Applications                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚   iOS Client    â”‚                            â”‚ Android Client  â”‚    â”‚
â”‚  â”‚                 â”‚                            â”‚                 â”‚    â”‚
â”‚  â”‚  SGPlayer/      â”‚                            â”‚  ExoPlayer      â”‚    â”‚
â”‚  â”‚  AVFoundation   â”‚                            â”‚  Media3         â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚                                                â”‚
           â”‚ RTSP/RTP (Port 554/8000+)                     â”‚ 
           â”‚ HTTP/MJPEG (Port 80/8080)                      â”‚
           â–¼                                                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     WiFi Network Layer                                 â”‚
â”‚                    IEEE 802.11n 2.4GHz                                 â”‚
â”‚                                                                         â”‚
â”‚  â€¢ WPA2/WPA3 Security           â€¢ QoS for Video Traffic                â”‚
â”‚  â€¢ TCP for Control Channels     â€¢ UDP for Media Streams                â”‚
â”‚  â€¢ Auto-reconnection            â€¢ Network Discovery (mDNS)             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â–²
           â”‚
           â”‚ WiFi 802.11n
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    BK7258 Streaming Server                             â”‚
â”‚                                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚  â”‚  RTSP Server    â”‚              â”‚  HTTP Server    â”‚                  â”‚
â”‚  â”‚                 â”‚              â”‚                 â”‚                  â”‚
â”‚  â”‚  Port: 554      â”‚              â”‚  Port: 8080     â”‚                  â”‚
â”‚  â”‚                 â”‚              â”‚                 â”‚                  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚              â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚                  â”‚
â”‚  â”‚  â”‚Session Mgmt â”‚â”‚              â”‚ â”‚MJPEG Stream â”‚ â”‚                  â”‚
â”‚  â”‚  â”‚â€¢ DESCRIBE   â”‚â”‚              â”‚ â”‚â€¢ Multipart  â”‚ â”‚                  â”‚
â”‚  â”‚  â”‚â€¢ SETUP      â”‚â”‚              â”‚ â”‚â€¢ Boundary   â”‚ â”‚                  â”‚
â”‚  â”‚  â”‚â€¢ PLAY/PAUSE â”‚â”‚              â”‚ â”‚â€¢ JPEG Framesâ”‚ â”‚                  â”‚
â”‚  â”‚  â”‚â€¢ TEARDOWN   â”‚â”‚              â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚                  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
â”‚  â”‚         â”‚        â”‚                       â”‚                         â”‚
â”‚  â”‚         â–¼        â”‚                       â–¼                         â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚  â”‚  â”‚RTP Transportâ”‚ â”‚              â”‚ TCP Transport   â”‚                  â”‚
â”‚  â”‚  â”‚â€¢ Video RTP  â”‚ â”‚              â”‚ â€¢ HTTP/1.1      â”‚                  â”‚
â”‚  â”‚  â”‚â€¢ RTCP Reportâ”‚ â”‚              â”‚ â€¢ Keep-Alive    â”‚                  â”‚
â”‚  â”‚  â”‚â€¢ UDP Ports  â”‚ â”‚              â”‚ â€¢ Chunked       â”‚                  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ðŸ”„ **Data Flow Diagram**

### **Video Processing Pipeline**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      OV6946 Camera Sensor                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  Image Sensor   â”‚â”€â”€â”€â–ºâ”‚  Analog AFE     â”‚â”€â”€â”€â–ºâ”‚  Analog Output  â”‚    â”‚
â”‚  â”‚  400x400 pixels â”‚    â”‚  Signal Process â”‚    â”‚  Composite Videoâ”‚    â”‚
â”‚  â”‚  30 FPS         â”‚    â”‚  Gain/Exposure  â”‚    â”‚                 â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                         â”‚ Analog Video
                                                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       BK7258 Processing                                â”‚
â”‚                                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚   ADC Capture   â”‚â”€â”€â”€â–ºâ”‚  Frame Buffer   â”‚â”€â”€â”€â–ºâ”‚  MJPEG Encoder  â”‚    â”‚
â”‚  â”‚  â€¢ 8-bit Sample â”‚    â”‚  â€¢ Ring Buffer  â”‚    â”‚  â€¢ DCT Transformâ”‚    â”‚
â”‚  â”‚  â€¢ Line Capture â”‚    â”‚  â€¢ Frame Sync   â”‚    â”‚  â€¢ Quantization â”‚    â”‚
â”‚  â”‚  â€¢ 30 FPS       â”‚    â”‚  â€¢ Memory Mgmt  â”‚    â”‚  â€¢ Huffman Code â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚           â–²                       â”‚                       â”‚            â”‚
â”‚           â”‚ SPI Control           â–¼                       â–¼            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ Camera Control  â”‚    â”‚  Quality Adapt  â”‚    â”‚ Stream Packetizeâ”‚    â”‚
â”‚  â”‚ â€¢ Exposure      â”‚    â”‚  â€¢ Bitrate Ctrl â”‚    â”‚ â€¢ RTP Packets   â”‚    â”‚
â”‚  â”‚ â€¢ Gain          â”‚    â”‚  â€¢ Frame Skip   â”‚    â”‚ â€¢ HTTP Chunks   â”‚    â”‚
â”‚  â”‚ â€¢ Frame Rate    â”‚    â”‚  â€¢ Resolution   â”‚    â”‚ â€¢ Error Correct â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                         â”‚              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                         â”‚ Encoded Stream
                                                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Network Transmission                              â”‚
â”‚                                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚  â”‚  RTSP/RTP       â”‚              â”‚  HTTP/MJPEG     â”‚                  â”‚
â”‚  â”‚                 â”‚              â”‚                 â”‚                  â”‚
â”‚  â”‚  â€¢ Session Mgmt â”‚              â”‚  â€¢ Multipart    â”‚                  â”‚
â”‚  â”‚  â€¢ RTP Payload  â”‚              â”‚  â€¢ JPEG Frames  â”‚                  â”‚
â”‚  â”‚  â€¢ RTCP Reports â”‚              â”‚  â€¢ HTTP Headers â”‚                  â”‚
â”‚  â”‚  â€¢ UDP Transportâ”‚              â”‚  â€¢ TCP Transportâ”‚                  â”‚
â”‚  â”‚                 â”‚              â”‚                 â”‚                  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
â”‚           â”‚                                 â”‚                          â”‚
â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                          â”‚
â”‚                             â”‚ WiFi 802.11n                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Mobile Applications                                â”‚
â”‚                                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚  â”‚   iOS Client    â”‚              â”‚ Android Client  â”‚                  â”‚
â”‚  â”‚                 â”‚              â”‚                 â”‚                  â”‚
â”‚  â”‚  â€¢ SGPlayer     â”‚              â”‚  â€¢ ExoPlayer    â”‚                  â”‚
â”‚  â”‚  â€¢ Hardware     â”‚              â”‚  â€¢ Hardware     â”‚                  â”‚
â”‚  â”‚    Decode       â”‚              â”‚    Decode       â”‚                  â”‚
â”‚  â”‚  â€¢ Video Render â”‚              â”‚  â€¢ Video Render â”‚                  â”‚
â”‚  â”‚  â€¢ UI Controls  â”‚              â”‚  â€¢ UI Controls  â”‚                  â”‚
â”‚  â”‚                 â”‚              â”‚                 â”‚                  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ðŸ“Š **Performance Specifications**

### **System Performance Metrics**

| **Metric** | **Target** | **Typical** | **Notes** |
|------------|------------|-------------|-----------|
| **Video Resolution** | 400x400 pixels | 400x400 | Fixed resolution |
| **Frame Rate** | 30 FPS | 25-30 FPS | Adaptive based on network |
| **Video Bitrate** | 200-800 Kbps | 400 Kbps | MJPEG compression |
| **Streaming Latency** | <500ms | 200-300ms | RTSP/RTP protocol |
| **WiFi Range** | 50+ meters | 30-50m | Line of sight |
| **Power Consumption** | <1W | 800mW | Total system power |
| **Startup Time** | <10 seconds | 5-8 seconds | Boot to streaming |
| **Multi-client Support** | 4 clients | 2-4 clients | Concurrent streams |

### **Network Requirements**

| **Protocol** | **Bandwidth** | **Latency** | **Reliability** |
|--------------|---------------|-------------|-----------------|
| **RTSP/RTP** | 500-1000 Kbps | 100-300ms | UDP - Best effort |
| **HTTP/MJPEG** | 800-1200 Kbps | 500-1000ms | TCP - Reliable |
| **Control Data** | 10-50 Kbps | 50-100ms | TCP - Reliable |

---

## ðŸ› ï¸ **Development Tools & Environment**

### **Hardware Development**
- **BK7258 Development Board**: Official Beken evaluation board
- **OV6946 Sensor Module**: Evaluation module with breakout board
- **Logic Analyzer**: For SPI protocol debugging
- **Oscilloscope**: For analog signal analysis
- **Power Supply**: Adjustable 3.3V laboratory supply
- **J-Link Debugger**: ARM Cortex debugging interface

### **Software Development Tools**

#### **Firmware Development**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Firmware Development Stack                          â”‚
â”‚                                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚      IDE        â”‚  â”‚   Toolchain     â”‚  â”‚    Debugging    â”‚        â”‚
â”‚  â”‚                 â”‚  â”‚                 â”‚  â”‚                 â”‚        â”‚
â”‚  â”‚  â€¢ VS Code      â”‚  â”‚  â€¢ GCC ARM      â”‚  â”‚  â€¢ J-Link GDB   â”‚        â”‚
â”‚  â”‚  â€¢ Eclipse CDT  â”‚  â”‚  â€¢ Newlib       â”‚  â”‚  â€¢ OpenOCD      â”‚        â”‚
â”‚  â”‚  â€¢ C/C++ Ext    â”‚  â”‚  â€¢ ARM CMSIS    â”‚  â”‚  â€¢ RTT Viewer   â”‚        â”‚
â”‚  â”‚                 â”‚  â”‚                 â”‚  â”‚                 â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚                                 â”‚                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚    Framework    â”‚  â”‚   Libraries     â”‚  â”‚     Testing     â”‚        â”‚
â”‚  â”‚                 â”‚  â”‚                 â”‚  â”‚                 â”‚        â”‚
â”‚  â”‚  â€¢ Beken Armino â”‚  â”‚  â€¢ FreeRTOS     â”‚  â”‚  â€¢ Unit Tests   â”‚        â”‚
â”‚  â”‚  â€¢ SDK v2.x     â”‚  â”‚  â€¢ lwIP Stack   â”‚  â”‚  â€¢ Integration  â”‚        â”‚
â”‚  â”‚  â€¢ HAL Drivers  â”‚  â”‚  â€¢ mbedTLS      â”‚  â”‚  â€¢ Hardware PIL â”‚        â”‚
â”‚  â”‚                 â”‚  â”‚                 â”‚  â”‚                 â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### **Mobile Development Tools**

**iOS Development Environment:**
- **Xcode 14+**: Latest iOS development environment
- **Swift 5.7+**: Modern programming language
- **SwiftUI**: Declarative UI framework
- **SGPlayer**: Third-party RTSP streaming library
- **TestFlight**: Beta testing and distribution

**Android Development Environment:**
- **Android Studio**: Official Android IDE
- **Kotlin**: Modern programming language for Android
- **Jetpack Compose**: Modern UI toolkit
- **ExoPlayer with Media3**: Google's media player library
- **Firebase**: Analytics and crash reporting

---

## ðŸ“… **Project Timeline & Milestones**

### **5-Week Development Schedule**

```
Week 1: Hardware Integration & Basic Functionality
â”œâ”€â”€ Days 1-2: BK7258 development board setup and initialization
â”œâ”€â”€ Days 3-4: OV6946 sensor integration and SPI communication
â”œâ”€â”€ Days 5-6: ADC configuration and basic video capture
â””â”€â”€ Day 7: Milestone Review - Hardware validation complete

Week 2: Camera System & Image Processing
â”œâ”€â”€ Days 1-2: OV6946 register configuration and optimization
â”œâ”€â”€ Days 3-4: Frame buffer management and video pipeline
â”œâ”€â”€ Days 5-6: MJPEG compression implementation
â””â”€â”€ Day 7: Milestone Review - Video processing functional

Week 3: Network Streaming Implementation
â”œâ”€â”€ Days 1-2: WiFi stack configuration and basic HTTP server
â”œâ”€â”€ Days 3-4: MJPEG over HTTP streaming implementation
â”œâ”€â”€ Days 5-6: RTSP server and RTP transport development
â””â”€â”€ Day 7: Milestone Review - Basic streaming operational

Week 4: Mobile Application Development
â”œâ”€â”€ Days 1-2: iOS app foundation and UI development
â”œâ”€â”€ Days 3-4: Android app foundation and UI development
â”œâ”€â”€ Days 5-6: Video player integration and stream connection
â””â”€â”€ Day 7: Milestone Review - Mobile apps functional

Week 5: Integration, Testing & Optimization
â”œâ”€â”€ Days 1-2: End-to-end system integration testing
â”œâ”€â”€ Days 3-4: Performance optimization and bug fixes
â”œâ”€â”€ Days 5-6: Documentation and final testing
â””â”€â”€ Day 7: Project Completion - Full system demo ready
```

### **Detailed Milestone Breakdown**

#### **Milestone 1: Hardware Validation (Week 1)**
- [ ] BK7258 powers on with stable 3.3V supply
- [ ] WiFi stack initializes and can connect to access point
- [ ] OV6946 responds to SPI configuration commands
- [ ] ADC captures analog video signal from OV6946
- [ ] Basic frame synchronization working
- [ ] LED indicators show system status

#### **Milestone 2: Video Processing (Week 2)**
- [ ] OV6946 configured for 400x400@30fps operation
- [ ] Frame buffers allocated and managed properly
- [ ] Raw video data converted to RGB/YUV format
- [ ] MJPEG compression producing valid JPEG frames
- [ ] Frame rate control and quality adjustment working
- [ ] Memory usage optimized for continuous operation

#### **Milestone 3: Network Streaming (Week 3)**
- [ ] WiFi connection stable with proper IP configuration
- [ ] HTTP server responds to client requests
- [ ] MJPEG over HTTP streaming functional
- [ ] RTSP server accepts client connections
- [ ] RTP video packets transmitted correctly
- [ ] Multiple client connections supported

#### **Milestone 4: Mobile Applications (Week 4)**
- [ ] iOS app connects to HTTP/MJPEG stream
- [ ] Android app connects to RTSP stream
- [ ] Video playback smooth with proper controls
- [ ] Network discovery and automatic connection
- [ ] Stream quality adaptation based on network
- [ ] User interface polished and intuitive

#### **Milestone 5: System Integration (Week 5)**
- [ ] End-to-end latency under 500ms
- [ ] Stable operation for 24+ hours
- [ ] Power consumption under 1W
- [ ] Range testing validates 50+ meter operation
- [ ] Error handling and recovery mechanisms working
- [ ] Documentation complete and accurate

---

## ðŸ’° **Cost Analysis**

### **Bill of Materials (BOM)**

| **Component** | **Quantity** | **Unit Cost** | **Total Cost** | **Notes** |
|---------------|--------------|---------------|----------------|-----------|
| **BK7258 Dev Board** | 1 | $25 | $25 | Includes breakout and debug |
| **OV6946 Sensor** | 1 | $15 | $15 | Evaluation module |
| **PCB Fabrication** | 5 | $10 | $50 | 4-layer PCB, minimum order |
| **Passive Components** | - | $5 | $5 | Resistors, capacitors, connectors |
| **Enclosure/Mechanical** | 1 | $10 | $10 | 3D printed or machined case |
| **Development Tools** | - | $100 | $100 | J-Link, logic analyzer rental |
| **Testing Equipment** | - | $50 | $50 | WiFi router, mobile devices |
| **Miscellaneous** | - | $20 | $20 | Cables, power supplies, etc. |
| | | **Total** | **$275** | **Development prototype cost** |

### **Production Cost Estimate** (1000 units)
- **BK7258 SoC**: $8 per unit
- **OV6946 Sensor**: $6 per unit  
- **PCB + Components**: $12 per unit
- **Assembly + Test**: $5 per unit
- **Enclosure**: $3 per unit
- **Total Manufacturing**: **$34 per unit**

---

## ðŸŽ¯ **Market Applications**

### **Target Markets**

#### **IoT and Smart Home**
- **Security Cameras**: Indoor/outdoor monitoring systems
- **Baby Monitors**: WiFi-enabled nursery cameras
- **Pet Monitoring**: Remote pet observation systems
- **Smart Doorbells**: Video door entry systems

#### **Industrial Applications**
- **Process Monitoring**: Manufacturing line inspection
- **Quality Control**: Automated visual inspection
- **Remote Maintenance**: Equipment status monitoring
- **Safety Monitoring**: Hazardous area observation

#### **Educational and Hobby**
- **STEM Education**: Embedded systems learning platform
- **Maker Projects**: DIY security and monitoring solutions
- **Prototyping Platform**: Rapid development for camera applications
- **Research Projects**: Computer vision and streaming research

### **Competitive Advantages**
- **Ultra-compact design**: Smallest form factor in market
- **Low power consumption**: Battery-powered applications possible
- **Professional protocols**: RTSP support for enterprise integration
- **Cross-platform support**: Both iOS and Android native apps
- **Open source approach**: Customizable and extensible platform

---

## ðŸ”® **Future Enhancements**

### **Phase 2 Features (Next 6 months)**
- **H.264 Hardware Encoding**: Leverage BK7258's video acceleration
- **WebRTC Support**: Ultra-low latency streaming (<100ms)
- **Edge AI Integration**: On-device object detection and recognition
- **Audio Streaming**: Microphone integration with audio/video sync
- **Cloud Integration**: AWS IoT or Azure IoT connectivity
- **OTA Updates**: Over-the-air firmware update capability

### **Phase 3 Features (Next 12 months)**
- **Multi-camera Support**: Synchronized multi-view streaming
- **Advanced Analytics**: Motion detection, facial recognition
- **5GHz WiFi Support**: Higher bandwidth and less congestion
- **Battery Management**: Advanced power saving modes
- **Professional Features**: PTZ control, digital zoom, image stabilization
- **Commercial Dashboard**: Web-based management interface

### **Long-term Roadmap**
- **AI-powered Features**: Smart alerts, behavior analysis
- **Integration APIs**: Third-party system integration
- **Scalable Architecture**: Support for hundreds of camera nodes
- **Edge Computing**: Local processing cluster capabilities
- **Professional Certification**: CE, FCC, UL compliance for commercial use

---

## ðŸ“‹ **Conclusion**

The BK7258 + OV6946 WiFi Video Streaming System represents a cutting-edge solution for embedded video streaming applications. By combining the powerful BK7258 WiFi SoC with the ultra-compact OV6946 camera sensor, this project delivers:

### **Key Achievements**
- **Complete System Integration**: Hardware, firmware, and mobile applications
- **Professional Protocols**: RTSP and HTTP streaming with mobile client support  
- **Compact Form Factor**: Suitable for space-constrained applications
- **Low Power Design**: Optimized for battery-powered and embedded use
- **Scalable Architecture**: Foundation for advanced features and commercial deployment

### **Technical Innovation**
- **Smallest Available Sensor**: OV6946 provides unprecedented miniaturization
- **Efficient Processing**: BK7258 offers optimal price/performance for streaming
- **Cross-platform Compatibility**: Native mobile apps for broad market reach
- **Open Development**: Extensible platform for custom applications

### **Market Impact**
This system opens new possibilities for IoT, security, industrial, and educational applications where traditional camera solutions are too large, power-hungry, or expensive. The combination of professional streaming protocols with consumer-friendly mobile apps creates a unique position in the embedded video market.

### **Project Success Metrics**
- **Technical**: All performance targets achieved within 5-week timeline
- **Commercial**: Production-ready design with clear path to market
- **Educational**: Complete documentation enables knowledge transfer
- **Strategic**: Platform foundation for advanced feature development

The BK7258 + OV6946 system demonstrates how modern embedded technologies can create powerful, compact, and efficient video streaming solutions that meet the demands of next-generation IoT and smart device applications.

---

*Document prepared for: BK7258 + OV6946 WiFi Video Streaming System*  
*Version: 1.0*  
*Date: September 2024*  
*Author: Project Development Team*